---
import { ArrowRight, Lock } from 'lucide-react';

interface Props {
  id: string;
  title: string;
  description: string;
  icon: string;
  status: 'ready' | 'beta' | 'coming_soon';
  tags: string[];
}

const { id, title, description, icon, status, tags } = Astro.props;

const statusColors = {
  ready: 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400',
  beta: 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400',
  coming_soon: 'bg-slate-100 text-slate-500 dark:bg-slate-800 dark:text-slate-400',
};

const isAvailable = status !== 'coming_soon';
---

<div class={`
  group relative bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm transition-all duration-200
  ${isAvailable ? 'hover:shadow-md hover:border-blue-200 dark:hover:border-blue-800 cursor-pointer' : 'opacity-75 cursor-not-allowed'}
`}>
  {isAvailable && (
    <a href={`/miniapps/${id}`} class="absolute inset-0 z-10" aria-label={`Open ${title}`}></a>
  )}

  <div class="flex justify-between items-start mb-4">
    <div class="w-12 h-12 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-2xl">
      {icon}
    </div>
    <span class={`text-xs font-medium px-2.5 py-0.5 rounded-full ${statusColors[status]}`}>
      {status === 'ready' ? 'Ready' : status === 'beta' ? 'Beta' : 'Coming Soon'}
    </span>
  </div>

  <h3 class="text-lg font-semibold text-slate-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
    {title}
  </h3>
  
  <p class="text-sm text-slate-500 dark:text-slate-400 mb-4 line-clamp-2">
    {description}
  </p>

  <div class="flex items-center justify-between mt-auto">
    <div class="flex gap-2">
      {tags.map(tag => (
        <span class="text-xs text-slate-500 dark:text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded">
          #{tag}
        </span>
      ))}
    </div>
    
    {isAvailable ? (
      <ArrowRight className="w-5 h-5 text-slate-300 group-hover:text-blue-500 transition-colors" />
    ) : (
      <Lock className="w-4 h-4 text-slate-400" />
    )}
  </div>
</div>
